# task1.py

def caching_fibonacci():
    """
    Створює функцію для обчислення чисел Фібоначчі з кешуванням.
    
    Використовує замикання, щоб зберігати кеш (словник 'cache') 
    між викликами.
    """
    # Створюємо порожній словник для кешування
    cache = {}

    def fibonacci(n):
        """
        Внутрішня функція, що обчислює n-е число Фібоначчі.
        
        Використовує рекурсію та кеш 'cache' з зовнішньої області видимості.
        """
        # Базові випадки ряду Фібоначчі
        if n <= 0:
            return 0
        if n == 1:
            return 1
        
        # Перевіряємо, чи є вже це значення у кеші
        if n in cache:
            return cache[n]

        # Якщо немає, обчислюємо рекурсивно, зберігаємо в кеш та повертаємо
        cache[n] = fibonacci(n - 1) + fibonacci(n - 2)
        return cache[n]

    # Зовнішня функція повертає внутрішню функцію
    return fibonacci

# --- Приклад використання ---
if __name__ == "__main__":
    # Отримуємо функцію fibonacci
    fib = caching_fibonacci()
    
    # Використовуємо функцію fibonacci для обчислення чисел
    print(fib(10))  # Виведе 55
    print(fib(15))  # Виведе 610
    print(fib(20))  # Виведе 6765
    
    # Завдяки кешу, повторний виклик fib(10) буде миттєвим
    print(fib(10))  # Миттєво виведе 55
